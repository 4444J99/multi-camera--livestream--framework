# mobile.yaml - Portable laptop streaming configuration
#
# Scaled-down setup for mobile/field streaming with a laptop
# and USB capture devices. Demonstrates profile scalability.
#
# Production requirements: 2 cameras, 4 audio inputs

profile:
  name: "mobile"
  description: "Portable laptop streaming setup"
  version: "1.0.0"

# =============================================================================
# PRODUCTION REQUIREMENTS (what the show needs)
# =============================================================================

production:
  video:
    cameras: 2                      # Two camera angles
    capture_resolution: "1080p30"   # HD capture
    codec: "h264"
  audio:
    input_channels: 4               # Minimal audio inputs
    output_channels: 2              # Stereo mix
    sample_rate: 48000
    bit_depth: 24
  streaming:
    output_resolution: "1080p30"
    bitrate_kbps: 4500
    platforms: 1

# =============================================================================
# HARDWARE CONFIGURATION
# =============================================================================

hardware:
  # ---------------------------------------------------------------------------
  # Compute - portable laptop
  # ---------------------------------------------------------------------------
  compute:
    category: "laptop"              # laptop | workstation | server
    ram_gb: 36
    cpu_cores: 12
    gpu_category: "integrated"
    gpu_vram_gb: 0
    storage_type: "nvme"

  # ---------------------------------------------------------------------------
  # Video Capture - USB devices
  # ---------------------------------------------------------------------------
  video_capture:
    category: "usb_capture"         # usb_capture | pcie_capture | ndi
    inputs: 2
    max_resolution: "2160p30"
    interface: "hdmi"
    detection_patterns:
      - "elgato"
      - "cam link"
      - "avermedia"
    # No external enclosure needed for USB
    enclosure: null

  # ---------------------------------------------------------------------------
  # Audio Interface - USB class-compliant
  # ---------------------------------------------------------------------------
  audio_interface:
    category: "usb_interface"       # usb_interface | dante_interface | pcie_audio
    channels_in: 2
    channels_out: 2
    sample_rates:
      - 44100
      - 48000
      - 96000
    network_audio: false            # No Dante/AVB
    detection_patterns:
      - "focusrite"
      - "scarlett"
      - "usb audio"
    preference_pane_paths: []

  # ---------------------------------------------------------------------------
  # Network
  # ---------------------------------------------------------------------------
  network:
    category: "gigabit_ethernet"    # Could also be wifi for mobile
    bandwidth_gbps: 1
    dedicated_audio_network: false
    primary_interface: "en0"

# =============================================================================
# SOFTWARE CONFIGURATION
# =============================================================================

software:
  required:
    video_mixer:
      category: "streaming_switcher"
      capabilities:
        - "multi_source"
        - "encoding"
        - "streaming"
      min_sources: 2
      bundle_id: "com.obsproject.obs-studio"
      process_names:
        - "OBS"
        - "obs"
      role: "Video mixing, encoding, streaming"
      launch_order: 3

    audio_mixer:
      category: "daw"
      capabilities:
        - "multi_channel"
        - "mixing"
      min_channels: 4
      bundle_id: "com.ableton.live"
      process_names:
        - "Ableton Live"
        - "Live"
      role: "Audio mixing"
      launch_order: 2

  optional:
    graphics:
      category: "3d_graphics"
      capabilities:
        - "realtime_rendering"
      bundle_id: "org.blenderfoundation.blender"
      process_names:
        - "Blender"
      role: "Real-time graphics overlay"

# =============================================================================
# THRESHOLDS (adjusted for laptop resources)
# =============================================================================

thresholds:
  min_disk_space_gb: 30
  min_memory_free_percent: 15
  max_cpu_usage_percent: 80

# =============================================================================
# TIMING (faster for portable use)
# =============================================================================

timing:
  launch_delay_seconds: 2
  quit_timeout_seconds: 8

# =============================================================================
# STREAMING ENDPOINTS
# =============================================================================

streaming:
  primary:
    platform: "YouTube"
    rtmp_endpoint: "a.rtmp.youtube.com"

# =============================================================================
# OPERATIONAL NOTES
# =============================================================================

notes:
  pre_stream: |
    1. Connect USB-C hub with capture devices
    2. Verify WiFi/Ethernet connection
    3. Run health-check.sh
  post_stream: |
    1. Stop streaming
    2. Disconnect safely
